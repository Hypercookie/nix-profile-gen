# Example optnix configuration for macprofile
# Copy this to ~/.config/optnix/config.toml or let the devshell set it up automatically

default_scope = "macprofile"
formatter_cmd = "nixfmt"

[scopes.macprofile]
description = "macOS Profile Generator Options"
# List all payload options using the Python script
options-list-command = "python3 /path/to/nixmagic/list-macprofile-options.py 2>/dev/null | grep '^  ' | sed 's/^  //' | sed 's/^/programs.macprofile.payloads.\"/' | sed 's/\$/\" /' || echo ''"
# Evaluate options using home-manager-options (requires Home Manager)
evaluator = "home-manager-options '{{ .Option }}' 2>/dev/null || echo 'Option not found'"

# Alternative scope using home-manager-options directly (if available)
[scopes.macprofile-hm]
description = "macOS Profile Generator Options (Home Manager)"
options-list-command = "home-manager-options --json 2>/dev/null | jq -r '.[] | select(.name | startswith(\"programs.macprofile\")) | .name' || echo ''"
evaluator = "home-manager-options '{{ .Option }}' 2>/dev/null || echo 'Option not found'"
